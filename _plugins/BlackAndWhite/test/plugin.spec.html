<html>
<head></head>
<body>
    <ul id="wrapper">
        <li>
            <a target="_blank" href="http://twitter.com/gianlucaguarini" class="bwWrapper">
                <img  src="../files/twitter.jpg" width="300" height="225" />
            </a>
        </li>
        <li>
            <a href="#" class="bwWrapper">
                <img  src="../files/Hydrangeas.jpg" width="300" height="225" />
            </a>
        </li>
        <li class="last">
            <a href="#" class="bwWrapper">
                <img  src="../files/Desert.jpg" width="300" height="225" />
            </a>
        </li>
        <li>
            <a href="#" class="bwWrapper">
                <img  src="../files/Chrysanthemum.jpg" width="300" height="225" />
            </a>
        </li>
        <li>
            <a href="#" class="bwWrapper">
                <img  src="../files/Jellyfish.jpg" width="300" height="225" />
            </a>
        </li>
        <li class="last">
            <a href="#" class="bwWrapper">
                <img  src="../files/Koala.jpg" width="300" height="225" />
            </a>
        </li>
        <li>
            <a href="#" class="bwWrapper">
                <img  src="../files/Lighthouse.jpg" width="300" height="225" />
            </a>
        </li>
        <li>
            <a href="#" class="bwWrapper">
                <img  src="../files/Penguins.jpg" width="300" height="225" />
            </a>
        </li>
        <li class="last">
            <a href="#" class="bwWrapper">
                <img  src="../files/Tulips.jpg" width="300" height="225" />
            </a>
        </li>
    </ul>
    <script src="../src/jquery.min.js"></script>
    <script src="../src/jQuery.BlackAndWhite.js"></script>
    <script>
        var assertion = 0,
            testsLength = $('li').length;
        console.log('TAP version 13');
        console.log('1..'+ testsLength);
        // this shit does not work!
        var bw = $('.bwWrapper').BlackAndWhite({
            onImageReady: function(img) {
                $(img).parent().animate({
                    opacity: 1
                });
                console.log('ok ' + (++assertion));
                if (assertion === testsLength) {
                    setTimeout(function(){
                        bw.destroy();
                    },200);

                }
            }
        });

    </script>
</body>
</html>